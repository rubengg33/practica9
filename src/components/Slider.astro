---
import 'swiper/css';
import 'swiper/css/pagination';
import 'swiper/css/navigation';
const { courses } = Astro.props;
---

<div class="w-full max-w-7xl mx-auto px-4 py-8">
  <div class="swiper">
    <div class="swiper-wrapper">
      {
        courses.map((course: any) => (
          <div class="swiper-slide">
            <div class="bg-white rounded-lg shadow-md overflow-hidden h-[400px] flex flex-col">
              <div class="h-48 overflow-hidden">
                <img
                  src={course.imagen}
                  alt={course.titulo}
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-4 flex flex-col h-[calc(400px-192px)]">
                <h3 class="text-lg font-semibold truncate">{course.titulo}</h3>
                <p class="text-gray-600 text-sm mt-2 line-clamp-2 flex-grow">
                  {course.descripcion_resumida}
                </p>
                <div class="flex items-center justify-between mt-4 pt-2 border-t border-gray-200">
                  <span class="price-display text-blue-600 font-bold" data-price={course.precio}>${course.precio}</span>
                  <a
                    href={`/course/${course.slug}`}
                    class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition"
                  >
                    Ver m√°s
                  </a>
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
    <div class="swiper-pagination"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>

<script>
  import Swiper from 'swiper';
  import { Navigation, Pagination, Autoplay } from 'swiper/modules';

  new Swiper('.swiper', {
    modules: [Navigation, Pagination, Autoplay],
    slidesPerView: 1,
    spaceBetween: 20,
    loop: true,
    autoplay: {
      delay: 3000,
      disableOnInteraction: false,
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    breakpoints: {
      640: {
        slidesPerView: 2,
      },
      768: {
        slidesPerView: 3,
      },
      1024: {
        slidesPerView: 4,
      },
    },
  });
</script>

<style>
  .swiper {
    padding: 2rem;
  }
  .swiper-button-next,
  .swiper-button-prev {
    color: #3b82f6;
  }
  .swiper-pagination-bullet-active {
    background: #3b82f6;
  }
</style>